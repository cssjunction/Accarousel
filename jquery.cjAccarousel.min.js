(function(a){a.fn.cjAccarousel=function(b){var c={stand:".stand",panel:".detail-panel",pagerClass:"pager",x:".detail-panel",groupOf:5,scrollSpeed:1e3,ease:"swing",flyOutGap:3,nextPrev:true};b=a.extend(c,b);this.each(function(){function l(c){a(".inner-mask").removeClass("expanded");a(b.stand).show();a(b.panel).animate({width:"0","margin-left":"0"},300);e.show().removeClass("disabled");d.animate({"margin-left":"-"+j},300);a(c).parent().removeClass("active-panel").css("width",g-b.flyOutGap);d.width(i);b.pagerEnable=true;$pager.removeClass("disabled")}function k(f){c.find(b.stand).show();a(f).hide();e.addClass("disabled");a(f).parent().removeClass("disabled");if(a(f).parent().is(".first-item")){}else{d.animate({"margin-left":"-"+g+"px"},300)}e.hide();a(f).parent().prev().fadeIn(1e3);a(f).parent().next().fadeIn(1e3);a(f).parent().addClass("active-panel").width(h).show(100);a(f).siblings(b.panel).animate({width:h+"px","margin-left":"-"+h/2+"px"},300,function(){a(".inner-mask").addClass("expanded")});d.width(h+g*2+b.flyOutGap);b.pagerEnable=false;$pager.addClass("disabled")}var c=a(this),d=c.children("ul"),e=d.children("li"),f=e.length,g=e.outerWidth(),h=b.groupOf*g,i=f*g,j=0;d.width(i);d.wrap('<div class="inner-mask"/>');c.width(h);b.pagerEnable=true;e.each(function(){if(a(this).is(":first-child")){a(this).addClass("first-item")}if(a(this).is(":last-child")){a(this).addClass("last-item")}});e.children(b.stand).click(function(){if(a(this).parent().is(".disabled")){return false}k(this);return false});e.children(b.x).click(function(){l(this);return false});a(document).keyup(function(a){if(a.keyCode==27){l(e.children(b.x))}});this.animate=function(c){if(b.pagerEnable){var e=a(c.target),h=e.attr("href").split("-")[1];if(e.is(".active")){return false}else if(e.is(".pager-last")){a(".pager-prev").removeClass("disabled");a(".pager-next").addClass("disabled")}else if(e.is(".pager-first")){a(".pager-prev").addClass("disabled");a(".pager-next").removeClass("disabled")}else{a(".pager-prev, .pager-next").removeClass("disabled")}j=b.groupOf*g*h;if(e.is(".pager-last")){var i=f-b.groupOf*h;if(i<b.groupOf){var k=b.groupOf-i;j=(f-i-k)*g}}d.animate({"margin-left":"-"+j},b.scrollSpeed,b.ease);$pager.find("a").removeClass("active");e.addClass("active")}};this.pager=function(){var d,e=[];$pager=a('<ol class="'+b.pagerClass+'" />');var g=f/b.groupOf;if(g>Math.floor(g)){g=Math.floor(g)+1}else{g=Math.floor(g)}for(d=0;d<g;d++){e[d]='<li><a href="#stage-'+d+'">'+(d+1)+"</a></li>"}$pager.append(e.join(""));$pager.find("a").click(this.animate);$pager.find("a:first").addClass("active pager-first");$pager.find("a:last").addClass("pager-last");c.append($pager);if(b.nextPrev){var h=a('<li><a href="#" class="pager-next">Next »</a></li>'),i=a('<li><a href="#" class="disabled pager-prev">« Prev</a></li>'),j;h.find("a").bind("click",function(){if(a(this).is(".disabled")){return false}else{j=$pager.find("a.active");j.parent().next().find("a").click();return false}});i.find("a").bind("click",function(){if(a(this).is(".disabled")){return false}else{j=$pager.find("a.active");j.parent().prev().find("a").click();return false}});$pager.prepend(i);$pager.append(h)}};this.pager()});return this}})(jQuery)